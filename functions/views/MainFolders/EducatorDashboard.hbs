{{>home}}

<style>
    @media only screen and (min-width: 769px) {
        header,  nav, .row, main, footer {
      padding-left: 300px;
    }
    }
      

    @media only screen and (max-width : 992px) {
      header, main, footer {
        padding-left: 0;
      }
    }
          
      .tabs .tab a{
            color:#000;
        } /*Black color to the text*/

        .tabs .tab a:hover {
            background-color:#eee;
            color:#000;
        } /*Text color on hover*/

        .tabs .tab a.active {
            background-color:#888;
            color:#000;
        } /*Background and text color when a tab is active*/

        .tabs .indicator {
            background-color:#000;
        } /*Color of underline*/
</style>

<nav>
    <div class="teal nav-wrapper">
        <a href="#" data-target="slide-out" class="hide-on-medium-and-up sidenav-trigger"><i class="material-icons">menu</i></a>
        <a href="#" class="logo brand-logo">Edu-Eezi</a>

        <ul id="nav-mobile" class="right hide-on-med-and-down">
            <li><a href="/home">Home<i class="material-icons left">home</i></a></li>
            <li><a href="/search">Search<i class="material-icons left">search</i></a></li>
            <li><a href="/authenticated/create_school/create/">Create School<i class="material-icons left">add</i></a></li>
            <li><a href="#!">Record Lesson<i class="material-icons left">camera</i></a></li>
            <li><a href="collapsible.html">notifications<i class="material-icons left">messages</i></a></li>
        </ul>
    </div>
</nav>

<ul id="slide-out" class="teal lighten-1 sidenav sidenav-fixed">
    <li>
        <div class="user-view">
            <div class="background">
                <img src="https://d2v9y0dukr6mq2.cloudfront.net/video/thumbnail/JrbItQz/videoblocks-blue-glowing-lines-loopable-technology-background-4k-uhd-3840x2160_rpboetz1yz_thumbnail-full01.png">
            </div>
            <a href="#user"><img class="circle" src="https://images8.alphacoders.com/712/712496.jpg"></a>
            <a href="#name"><span class="white-text name">John Doe</span></a>
            <a href="#email"><span class="white-text email">jdandturk@gmail.com</span></a>
        </div>
    </li>
    <li><a class="white-text" href="#!"><i class="white-text material-icons">home</i>Home</a></li>
    <li><a class="white-text" href="#!"><i class="white-text material-icons">portrait</i>Profile</a></li>
    <li><a class="white-text" href="#!"><i class="white-text material-icons">search</i>Search</a></li>
    <li>
        <div class="divider"></div>
    </li>
    <li><a class="subheader white-text">Pages</a></li>
    <li><a class=" white-text" href="#!"><i class="white-text material-icons">attach_money</i>Monetization</a></li>
    <li><a class=" white-text" href="#!"><i class="white-text material-icons">cast</i>Lessons</a></li>
    <li><a class="white-text" href="#!"><i class="white-text material-icons">money</i>Revenue</a></li>
    <li><a class="white-text" href="#!"><i class="white-text material-icons">publish</i>Upload Lesson</a></li>
    <li><a class="subheader white-text">Account</a></li>
    <li><a class=" tab side white-text" href="#test1"><i class="white-text material-icons">settings</i>Settings</a></li>
    <li><a class=" tab side white-text" href="#test2"><i class="white-text material-icons">announcement</i>Chats</a></li>
    <li><a class="subheader white-text">Educator </a></li>
    <li><a class=" white-text" href="#!"><i class="white-text material-icons">school</i>Schools </a></li>
    <li><a class="white-text" href="#!"><i class="white-text material-icons">message</i>Send Feedback</a></li>
    <li><a class=" white-text" href="#!"><i class="white-text material-icons">info</i>Help</a></li>
</ul>



<div class="row">

    <div class="col s12 m3">
        <div class="card">
            <div class="card-image">


                <img src="https://flordemilonga.files.wordpress.com/2009/12/blank-white-page.jpg">
                <span class="black-text card-title">
                    <h1 class="black-text">$0</h1>Revenue
                </span>

                <a class="btn-floating halfway-fab waves-effect waves-light blue"><i class="material-icons">info_outline</i></a>
            </div>
            {{!-- <div class="card-content">
                <p>I am a very simple card. I am good at containing small bits of information. I am convenient because
                    I require little markup to use effectively.</p>
            </div> --}}
        </div>
    </div>

    <div class="col s12 m3">
        <div class="card">
            <div class="card-image">
                <img src="https://flordemilonga.files.wordpress.com/2009/12/blank-white-page.jpg">
                <span class="black-text card-title">
                    <h1 class=" black-text">0</h1>Views


                </span>
                <a class="btn-floating halfway-fab waves-effect waves-light blue"><i class="material-icons">info_outline</i></a>
            </div>
            {{!-- <div class="card-content">
                <p>I am a very simple card. I am good at containing small bits of information. I am convenient because
                    I require little markup to use effectively.</p>
            </div> --}}
        </div>
    </div>

    <div class="col s12 m3">
        <div class="card">
            <div class="card-image">
                <img src="https://flordemilonga.files.wordpress.com/2009/12/blank-white-page.jpg">
                <span class="black-text card-title">
                    <h1 class="black-text">0</h1>Likes
                </span>
                <a class="btn-floating halfway-fab waves-effect waves-light blue"><i class="material-icons">info_outline</i></a>
            </div>
            {{!-- <div class="card-content">
                <p>I am a very simple card. I am good at containing small bits of information. I am convenient because
                    I require little markup to use effectively.</p>
            </div> --}}
        </div>
    </div>

    <div class="col s12 m3">
        <div class="card">
            <div class="card-image">
                <img src="https://flordemilonga.files.wordpress.com/2009/12/blank-white-page.jpg">
                <span class="black-text card-title"><h1 class="black-text">0</h1>Subscribers</span>
                <a class="btn-floating halfway-fab waves-effect waves-light blue"><i class="material-icons">info_outline</i></a>
            </div>
            {{!-- <div class="card-content">
                <p>I am a very simple card. I am good at containing small bits of information. I am convenient because
                    I require little markup to use effectively.</p>
            </div> --}}
        </div>
    </div>
    <div class="col s12 m12 l12">
        <div class="card">
            <div class="card-tabs">
                <ul class="tabs tabs-fixed-width">
                    <li class="tab"><a href="#test4">Your Lessons</a></li>
                    <li class="tab"><a href="#test5">Your Schools</a></li>
                    <li class="tab"><a href="#test6">Views analytics</a></li>
                </ul>
            </div>


            <div class="card-content white ">
                <div id="test4">
                    <ul style="display: inline-block;" class="">
                        <div class="">
                            {{#each lessons}}
                            <p id="hidden_lesson_url" style="display: none">{{{url}}}</p>
                            <p id="hidden_lesson_code" style="display: none">{{{code}}}</p>
                            <li id="video" class="collection-item avatar home-video">
                                <video class="" style="width: 300px" class=" responsive-video" preload="metadata">
                                    <source src="{{{downloadURL}}}" type="video/mp4">
                                </video>
                                <br>
                                <span class="title">{{{name}}}</span>
                                <p>{{{uploaded_at}}} <br>

                                    <button id="remove_lesson" class="waves-effect waves-light btn red">Remove<i class="material-icons left">delete</i></button>
                                    <a href="/{{{BySchool}}}/{{{InClass}}}/{{{code}}}/view_lesson" class="waves-effect waves-light btn blue">Edit<i
                                            class="material-icons left">edit</i></a>
                                    <a href="/{{{BySchool}}}/{{{InClass}}}/{{{code}}}/view_lesson" class="waves-effect waves-light btn">Watch<i
                                            class="material-icons left">cast</i></a>
                                </p>
                            </li>

                            {{/each}}
                        </div>
                    </ul>
                    {{#each lessons}}
                    {{else}}
                    <div>
                        <h3 class="center-align teal-text">You have no lessons</h3>
                        <p class="center-align teal-text">How about uploading a lesson?</p>
                        <div style="margin-top: 100px; text-align: center">
                            <a href="#" class="btn teal center-align">Upload<i class="material-icons left">cloud_upload</i></a>
                        </div>
                    </div>
                    {{/each}}
                </div>
                <div id="test5">
                    <ul class="collection">
                        {{#each schools}}
                        <li style="font-weight: bold;" class="black-text collection-item">{{{name}}}<br><a class="btn red"
                                href="/{{{secretSchoolCode}}}/join/school/">Remove<i class="material-icons left">delete</i></a><a
                                href="/{{{BySchool}}}/{{{InClass}}}/{{{code}}}/view_lesson" class="waves-effect waves-light btn blue">Edit<i
                                    class="material-icons left">edit</i></a></li>


                        {{!-- Join School Button --}}

                        {{/each}}
                    </ul>
                    {{#each schools}}
                    {{else}}
                    <h3 class="center-align teal-text">You have no Schools</h3>
                    <p class="center-align teal-text">How about creating a school?</p>
                    <div style="margin-top: 100px; text-align: center">
                        <a href="/authenticated/create/create_school" class="btn teal center-align">Create School<i
                                class="material-icons left">add</i></a>
                    </div>
                    {{/each}}

                </div>
                <div id="test6">Test 3</div>
            </div>
        </div>
    </div>
</div>
{{!-- Modal to agree to changes --}}
<div id="modal1" class="modal">
    <div class="modal-content">
        <h4>Are You Sure?</h4>
        <p>You won't be able to view it after you delete the video</p>
    </div>
    <div class="modal-footer">
        <button id="remove_lesson_confirmation" href="#!" class=" waves-effect waves-green btn-flat blue white-text">Remove<i
                class="material-icons left white-text">delete</i></button>
        <button class="modal-close waves-effect waves-green btn-flat red white-text">Cancel<i class="material-icons left white-text">cancel</i></button>
    </div>
</div>

{{!-- <div class="row">
    <div id="test1" class="col s12">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
        incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris
        nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum
        dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia
        deserunt mollit anim id est laborum.</div>
    <div id="test2" class="col s12">Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium
        doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto
        beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit,
        sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui
        dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt
        ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem
        ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure
        reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat
        quo voluptas nulla pariatur?</div>
    <div id="test3" class="col s12">
        At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque
        corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in
        culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et
        expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id
        quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus. Temporibus autem
        quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et
        molestiae non recusandae. Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus
        maiores alias consequatur aut perferendis doloribus asperiores repellat.
    </div>
</div> --}}

</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.5.2/firebase.js"></script>
<script>
    $(document).ready(function () {
        $('.sidenav').sidenav();
        $('.tabs').tabs();
        $('.modal').modal();
    })
</script>

<script>
    var config = {
        apiKey: "AIzaSyBNo2Ht5eM9m4AqXIEBJwEPFU8yiQL81Uc",
        authDomain: "edubirdie-1534842942940.firebaseapp.com",
        databaseURL: "https://edubirdie-1534842942940.firebaseio.com",
        projectId: "edubirdie-1534842942940",
        storageBucket: "edubirdie-1534842942940.appspot.com",
        messagingSenderId: "1077918538165"
    };
    firebase.initializeApp(config);

    let db = firebase.firestore();
    let storage = firebase.storage();
    const RemoveLessonButton = document.getElementById("remove_lesson");
    const RemoveLessonConfirmation = document.getElementById("remove_lesson_confirmation");
    const HiddenLessonCode = document.getElementById("hidden_lesson_code");
    const HiddenLessonUrl = document.getElementById("hidden_lesson_url").textContent;

    RemoveLessonButton.addEventListener('click', () => {
        $('.modal').modal('open');
        RemoveLessonConfirmation.addEventListener("click", () => {
            console.log("Remove confirmation")
            //Remove lesson from database and storage
            $('.modal').modal('close')

            db.collection("lessons")
                .doc(HiddenLessonCode.textContent)
                .delete()
                .then(() => {
                    //Document Successfully deleted!
                    M.toast({ html: 'Removed from database!' })
                    M.toast({ html: 'Deleting from storage....' })
                    let Reference = storage.ref("videos/" + HiddenLessonUrl)
                        .delete()
                        .then(() => {
                            //File deleted Successfully
                            M.toast({ html: 'Removed From storage' })
                            M.toast({ html: 'Successfully removed lesson' })
                            location.reload();
                        }).catch((err) => {
                            M.toast({ html: "An Error occured!" })
                            M.toast({ html: err.message })
                        })
                }).catch((err) => {
                    M.toast({ html: "An Error occured!" })
                    M.toast({ html: err.message })
                })
        })
    });
</script>